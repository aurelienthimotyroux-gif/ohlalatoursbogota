<!DOCTYPE html>
<html lang="{{ get_locale() }}">
<head>
  <meta charset="UTF-8" />
  <title>{{ _("Accueil") }} â€” Oh La La Tours BogotÃ¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Meta description (SEO) -->
  <meta name="description" content="{{ _('Visites guidÃ©es Ã  BogotÃ¡ avec Alejandra, guide locale. Tours privÃ©s en franÃ§ais, anglais et espagnol : Candelaria, Monserrate, ZipaquirÃ¡, cafÃ© (Hacienda Coloma), transport et transferts aÃ©roport.') }}">

  <!-- Keywords (facultatif) -->
  <meta name="keywords" content="visite guidÃ©e BogotÃ¡, guide francophone BogotÃ¡, excursion BogotÃ¡, tours privÃ©s BogotÃ¡, visiter la Candelaria BogotÃ¡, excursion ZipaquirÃ¡ depuis BogotÃ¡, randonnÃ©e Monserrate BogotÃ¡, cafÃ©, Bogota, Colombie, Monserrate, Zipaquira, Coloma, Hacienda Coloma, guide, tejo, Chapinero, hÃ´tel, hostel, Alejandra, gastronomie, pesos, taxi, transport, van, aÃ©roport, franÃ§ais, anglais, espagnol, Aguila, Club Colombia, histoire, tours exceptionnels">

  <!-- CMP / consentmanager (doit Ãªtre tout en haut du <head>) -->
  <script type="text/javascript" data-cmp-ab="1"
          src="https://cdn.consentmanager.net/delivery/autoblocking/62cc8437f29ac.js"
          data-cmp-host="b.delivery.consentmanager.net"
          data-cmp-cdn="cdn.consentmanager.net"
          data-cmp-codesrc="16"></script>

  <!-- Google Consent Mode (valeurs par dÃ©faut = refus) -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('consent', 'default', {
      ad_storage: 'denied',
      analytics_storage: 'denied',
      ad_user_data: 'denied',
      ad_personalization: 'denied',
      wait_for_update: 500
    });
  </script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-92M6CENDXH"></script>
  <script>
    gtag('js', new Date());
    // Id de mesure GA4
    gtag('config', 'G-92M6CENDXH', {
      anonymize_ip: true
    });
  </script>

  <!-- Canonical + hreflang -->
  <link rel="canonical" href="https://www.ohlalatoursbogota.com{{ request.path }}{% if get_locale()!='fr' %}?lang={{ get_locale() }}{% endif %}">
  <link rel="alternate" href="{{ url_for('index', lang='fr', _external=True) }}" hreflang="fr">
  <link rel="alternate" href="{{ url_for('index', lang='en', _external=True) }}" hreflang="en">
  <link rel="alternate" href="{{ url_for('index', lang='es', _external=True) }}" hreflang="es">
  <link rel="alternate" href="{{ url_for('index', lang='fr', _external=True) }}" hreflang="x-default">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.ohlalatoursbogota.com{{ request.path }}{% if get_locale()!='fr' %}?lang={{ get_locale() }}{% endif %}">
  <meta property="og:site_name" content="Oh La La Tours BogotÃ¡">
  <meta property="og:title" content="{{ _('Visites guidÃ©es Ã  BogotÃ¡ â€“ Guide francophone & tours privÃ©s') }}">
  <meta property="og:description" content="{{ _('DÃ©couvrez BogotÃ¡ : Candelaria, Monserrate, ZipaquirÃ¡, cafÃ© Ã  Hacienda Coloma. Visites en franÃ§ais, anglais et espagnol. Transferts aÃ©roport, chauffeur/van privÃ©.') }}">
  <meta property="og:image" content="{{ url_for('static', filename='images/accueil.jpg', _external=True) }}">
  {% if get_locale() == 'fr' %}
  <meta property="og:locale" content="fr_FR">
  {% elif get_locale() == 'en' %}
  <meta property="og:locale" content="en_US">
  {% else %}
  <meta property="og:locale" content="es_CO">
  {% endif %}

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ _('Visites guidÃ©es Ã  BogotÃ¡ â€“ Guide francophone & tours privÃ©s') }}">
  <meta name="twitter:description" content="{{ _('DÃ©couvrez BogotÃ¡ : Candelaria, Monserrate, ZipaquirÃ¡, cafÃ© Ã  Hacienda Coloma. Visites en franÃ§ais, anglais et espagnol. Transferts aÃ©roport, chauffeur/van privÃ©.') }}">
  <meta name="twitter:image" content="{{ url_for('static', filename='images/accueil.jpg', _external=True) }}">

  <!-- âœ… Perf & UI mobile -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <meta name="theme-color" content="#0e7490" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#0b4654" media="(prefers-color-scheme: dark)">

  <!-- CSS principal -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <!-- âœ… Pack mobile chargÃ© uniquement sur mobile -->
  <link rel="stylesheet"
        href="{{ url_for('static', filename='mobile-pack.css', v=1) }}"
        media="(max-width: 767px)">

  <!-- Police -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  <!-- â–¶ï¸ Accueil uniquement â€” rendre les 3 traits du burger blancs -->
  <style>
    /* Burger visible blanc sur le hero */
    .hero-topbar .burger span { background: #fff !important; }
    #burger[aria-expanded="true"] span { background: #fff !important; }

    /* Styles internes spÃ©cifiques aux avis + divers */
    .testimonials { background:#fff; padding:40px 20px; margin-top:40px; }
    .testimonials .container { max-width:1000px; margin:0 auto; }
    .testimonials h2 { text-align:center; margin-bottom:22px; font-size:28px; }

    .testimonials-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:18px; }
    @media (max-width:1024px){ .testimonials-grid{ grid-template-columns:repeat(2,1fr);} }
    @media (max-width:640px){ .testimonials-grid{ grid-template-columns:1fr;} }

    .testimonial-card { background:#fafafa; border:1px solid #eee; border-radius:12px; padding:16px; box-shadow:0 4px 14px rgba(0,0,0,.06); }

    .t-head { display:grid; grid-template-columns:auto 1fr; gap:6px 10px; align-items:center; margin-bottom:10px; }
    .t-name { font-weight:600; }
    .t-meta { color:#666; font-size:14px; }

    .t-stars { display:inline-flex; gap:4px; align-items:center; margin-bottom:8px; }
    .t-stars svg { width:18px; height:18px; }

    .testimonial-card .t-text{ font-size:15px; color:#333; line-height:1.5; white-space:pre-wrap; word-break:break-word; }
    .testimonial-card .t-text.clamp{ display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:4; overflow:hidden; }
    .testimonial-card.expanded .t-text{ -webkit-line-clamp:unset; display:block; overflow:visible; }

    .testimonial-card .t-toggle{ margin-top:8px; background:none; border:0; color:#007bff; font:inherit; cursor:pointer; padding:0; }
    .testimonial-card .t-toggle:hover{ text-decoration:underline; }

    .comment-section-title { text-align:center; font-size:2rem; margin-bottom:20px; }

    .hero .nav-hero a { text-decoration:none; }
    .hero .nav-hero a:focus { outline:2px dashed #333; outline-offset:3px; }

    .sr-only { position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,1px,1px); white-space:nowrap; border:0; }

    .flash-wrap { max-width:1000px; margin:16px auto; padding:0 20px; }
    .flash { margin:8px 0; padding:10px; border-radius:8px; }
    .flash-success{ background:#eefbf0; border:1px solid #b7ebc6; color:#1b5e20; }
    .flash-error{ background:#fdeaea; border:1px solid #f5c2c2; color:#8a1f1f; }

    /* Cache la sticky bar sur desktop ; visible sur mobile via mobile-pack.css */
    @media (min-width: 768px){ .sticky-cta { display: none; } }
  </style>

  <!-- Sprite d'icÃ´nes SVG (Ã©toiles) -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none;">
    <symbol id="icon-star-full" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="#ffb400" d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/>
    </symbol>
    <symbol id="icon-star-half" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="#ffb400" d="M12 17.27V2L9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/>
      <path fill="none" stroke="#ffb400" stroke-width="1.5" d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/>
    </symbol>
    <symbol id="icon-star-empty" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="none" stroke="#ffb400" stroke-width="1.5" d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2 9.19 8.62 2 9.24l5.46 4.73L5.82 21z"/>
    </symbol>
  </svg>

  <!-- JS Lire plus / Lire moins -->
  <script>
    function toggleText(index) {
      var textElement = document.getElementById("comment-" + index);
      if (!textElement) return;
      var card = textElement.closest(".testimonial-card");
      var full = textElement.dataset.full || "";
      if (!textElement.dataset.preview) {
        textElement.dataset.preview = textElement.textContent;
      }
      var preview = textElement.dataset.preview;
      var toggleButton = textElement.nextElementSibling;
      var isExpanded = card.classList.contains("expanded");
      if (isExpanded) {
        textElement.textContent = preview;
        card.classList.remove("expanded");
        if (toggleButton) toggleButton.textContent = "{{ _('Lire plus') }}";
      } else {
        textElement.textContent = full;
        card.classList.add("expanded");
        if (toggleButton) toggleButton.textContent = "{{ _('Lire moins') }}";
      }
    }
  </script>

  <!-- DonnÃ©es structurÃ©es -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TouristInformationCenter",
    "name": "Oh La La Tours BogotÃ¡",
    "url": "https://www.ohlalatoursbogota.com/",
    "image": "{{ url_for('static', filename='images/accueil.jpg', _external=True) }}",
    "areaServed": "BogotÃ¡, Colombia",
    "address": { "@type": "PostalAddress", "addressLocality": "BogotÃ¡", "addressCountry": "CO" },
    "availableLanguage": ["French","Spanish","English"],
    "email": "alejandramontana25.18@gmail.com",
    "telephone": "+57-350-538-4537",
    "sameAs": []
  }
  </script>
</head>
<body>

  <header class="hero" style="background-image: url('{{ url_for('static', filename='images/accueil.jpg') }}');">
    <div class="hero-topbar">
      <div id="lang-switcher" aria-label="{{ _('Choix de la langue') }}">
        <a href="{{ lang_url('fr') }}" aria-label="FranÃ§ais">ðŸ‡«ðŸ‡·</a> |
        <a href="{{ lang_url('en') }}" aria-label="English">ðŸ‡ºðŸ‡¸</a> |
        <a href="{{ lang_url('es') }}" aria-label="EspaÃ±ol">ðŸ‡¨ðŸ‡´</a>
      </div>

      <button class="burger" id="burger" aria-expanded="false" aria-controls="nav-menu" style="margin-left:auto; margin-right:8px;">
        <span></span><span></span><span></span>
        <span class="sr-only">{{ _("Ouvrir le menu") }}</span>
      </button>

      <nav class="nav-hero" id="nav-menu" aria-label="{{ _('Navigation principale') }}">
        <a href="{{ url_for('index', lang=get_locale()) }}">{{ _("Accueil") }}</a> |
        <a href="{{ url_for('tours', lang=get_locale()) }}">{{ _("Nos tours") }}</a> |
        <a href="{{ url_for('transport', lang=get_locale()) }}">{{ _("Service de Transport") }}</a> |
        <a href="{{ url_for('reservation', lang=get_locale()) }}">{{ _("RÃ©servation") }}</a>
      </nav>
    </div>
    <h1 class="hero-title">{{ _("Bienvenue Ã  BogotÃ¡ !") }}</h1>
  </header>

  <!-- Messages flash -->
  {% with msgs = get_flashed_messages(with_categories=true) %}
    {% if msgs %}
      <div class="flash-wrap" role="status" aria-live="polite">
        {% for cat, msg in msgs %}
          <div class="flash flash-{{ cat }}">
            {{ msg }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <main style="max-width: 1000px; margin: 30px auto; padding: 0 20px;">
    <section>
      <p>{{ _("Je suis Alejandra, guide locale passionnÃ©e, et je vous invite Ã  dÃ©couvrir une BogotÃ¡ authentique, vibrante et pleine de vie.") }}</p>
      <p>{{ _("Ã€ travers mes visites en petits groupes, nous explorerons son histoire, sa culture et ses saveurs : balades dans les quartiers historiques, expÃ©riences culinaires, escapades en pleine nature et excursions uniques aux alentours, comme la cÃ©lÃ¨bre CathÃ©drale de sel de ZipaquirÃ¡.") }}</p>
      <p>{{ _("Plus quâ€™une simple visite, je vous propose une immersion vivante et chaleureuse, une expÃ©rience Ã  ressentir et Ã  emporter avec vous.") }}</p>
      <p>{{ _("Je propose des visites guidÃ©es Ã  BogotÃ¡ avec un guide francophone, des tours privÃ©s vers la Candelaria, Monserrate et ZipaquirÃ¡, ainsi quâ€™un service de transport (taxi/van) et transferts aÃ©roport.") }}</p>
    </section>

    <section style="margin-top: 20px;">
      <a class="btn" href="{{ url_for('tours', lang=get_locale()) }}" role="button" style="display:inline-block;padding:10px 16px;border-radius:8px;background:#222;color:#fff;text-decoration:none;">{{ _("Voir les types de visites") }}</a>
      <a class="btn" href="{{ url_for('reservation', lang=get_locale()) }}" role="button" style="display:inline-block;padding:10px 16px;border-radius:8px;background:#007bff;color:#fff;text-decoration:none;margin-left:10px;">{{ _("RÃ©server maintenant") }}</a>
    </section>
  </main>

  <!-- SECTION CONTACT -->
  <section style="background: #f9f9f9; padding: 40px 20px; margin-top: 40px;">
    <div style="max-width: 1000px; margin: auto; display: flex; flex-wrap: wrap; align-items: flex-start; gap: 20px;">
      <div style="flex: 1; min-width: 250px; min-height: 300px;">
        <img 
          src="{{ url_for('static', filename='images/alejandra.jpg') }}"
          alt="{{ _('Alejandra, votre guide Ã  BogotÃ¡') }}"
          loading="lazy" decoding="async" width="800" height="600"
          style="display: block; width: 100%; height: 100%; object-fit: cover; border-radius: 10px; background: #ddd;">
      </div>
      <div style="flex: 1; min-width: 250px;">
        <h2>{{ _("Contact") }}</h2>
        <p><strong>{{ _("Email") }} :</strong> <a href="mailto:alejandramontana25.18@gmail.com">alejandramontana25.18@gmail.com</a></p>
        <p><strong>{{ _("WhatsApp") }} :</strong> <a href="https://wa.me/573505384537" target="_blank" rel="noopener">+57 350 538 4537</a></p>
        <p>{{ _("Nâ€™hÃ©sitez pas Ã  me contacter pour toute question ou rÃ©servation.") }}</p>
      </div>
    </div>
  </section>

  <!-- Formulaire Laisser un commentaire -->
  <section style="max-width: 1000px; margin: 30px auto; padding: 0 20px;">
    <h2 class="comment-section-title">{{ _("Ã€ votre tour de laisser un joli commentaire") }}</h2>
    <form method="POST" action="{{ url_for('submit_comment', lang=get_locale()) }}" style="background:#fafafa; border-radius:14px; padding:20px; box-shadow:0 6px 18px rgba(0,0,0,0.08); display:grid; gap:12px; max-width:600px;">
      <label>{{ _("Votre nom et pays") }}<br><input name="name" required aria-required="true"></label>
      <label>{{ _("Votre commentaire") }}<br><textarea name="message" rows="4" required aria-required="true"></textarea></label>
      <label>{{ _("Votre note") }}<br>
        <select name="rating" required aria-required="true">
          <option value="1">â˜…</option>
          <option value="2">â˜…â˜…</option>
          <option value="3">â˜…â˜…â˜…</option>
          <option value="4">â˜…â˜…â˜…â˜…</option>
          <option value="5" selected>â˜…â˜…â˜…â˜…â˜…</option>
        </select>
      </label>
      <button type="submit">{{ _("Envoyer") }}</button>
    </form>
  </section>

<!-- Section Commentaires -->
<section class="testimonials">
  <div class="container">
    <h2>{{ _("Avis des voyageurs") }}</h2>

    {# Fallback en langues d'origine â€” ne pas envelopper dans _() #}
    {% set fallback_comments = [
      {"name":"Francis","country":"Canada","date":"12 mai 2025","rating":5,"message":"Lâ€™expÃ©rience est super. Alejandra prend son temps pour nous expliquer et rÃ©pondre Ã  nos questions."},
      {"name":"Katy","country":"Mexique","date":"21 mars 2023","rating":5,"message":"Recomendado. La comunicaciÃ³n con Alejandra fue excelente antes y durante; todo lo descrito se cumpliÃ³ y siempre estuvo atenta a nuestras necesidades. Probablemente es un lugar que debes visitar si vienes a BogotÃ¡: hermosas vistas y una catedral de sal impresionante."},
      {"name":"Liliana","country":"Ã‰tats-Unis","date":"4 mars 2023","rating":4.5,"message":"Incredible experience! Alejandra and her father (Omar) took care of my husband's special needs, and everything was done at 100%. The Salt Cathedral, the traditional food at Brasas del Llano: a 5-star cultural experience. We recommend Alejandra if you want a tour with a friend. Thank you so much, see you next time!"},
      {"name":"Oscar","country":"Costa Rica","date":"8 janvier 2023","rating":4.5,"message":"Muchas gracias por su amabilidad y disponibilidad. SÃºper recomendado."},
      {"name":"Marvin","country":"Mexique","date":"15 septembre 2022","rating":5,"message":"Alejandra y su papÃ¡ nos ofrecieron un dÃ­a muy bonito en ZipaquirÃ¡. Nos vamos con excelentes recuerdos. Â¡Gracias!"},
      {"name":"Kristina","country":"Mexique","date":"27 aoÃ»t 2022","rating":5,"message":"Recomendamos esta experiencia. Lo pasamos excelente. Alejandra y su papÃ¡ son amables y atentos."},
      {"name":"Sam","country":"Ã‰tats-Unis","date":"14 aoÃ»t 2022","rating":5,"message":"Alejandra and her father Omar were perfect hosts, very attentive to the way I wanted to enjoy the visit."},
      {"name":"Jorge","country":"Mexique","date":"11 aoÃ»t 2022","rating":5,"message":"Altamente recomendado. Alejandra y su papÃ¡ fueron muy amables y estuvieron atentos a nosotros en todo momento. Â¡Experiencia 100% recomendada!"},
      {"name":"Fabiola","country":"Mexique","date":"11 aoÃ»t 2022","rating":5,"message":"De principio a fin, una experiencia muy agradable. Alejandra y su papÃ¡ Omar fueron muy atentos y amables. El desayuno y el almuerzo deliciosos. Nos dejaron disfrutar de la catedral a nuestro ritmo: Â¡lo apreciamos!"},
      {"name":"Ann","country":"Ã‰tats-Unis","date":"22 fÃ©vrier 2020","rating":5,"message":"Alejandra and her father were friendly, responsive to our questions, and took us to fascinating places we would never have found on our own. A very enjoyable experience."},
      {"name":"Nancy","country":"Mexique","date":"30 juillet 2019","rating":5,"message":"Una de las mejores experiencias que no te puedes perder. Hospitalidad excelente, recorrido agradable, visita impresionante a la catedral de sal."},
      {"name":"Luna","country":"Costa Rica","date":"25 juillet 2019","rating":5,"message":"Viaje bien planificado. Puntuales para recogernos en el hotel. Durante el trayecto, Alejandra y Omar fueron muy amables y pacientes."},
      {"name":"Yuliana","country":"Costa Rica","date":"18 juillet 2019","rating":5,"message":"Ale y Omar (su papÃ¡) son sÃºper simpÃ¡ticos y se esfuerzan para que te sientas como en casa."}
    ] %}

    {# Mois FR/ES/EN pour parser "12 mai 2025", "21 marzo 2023", ..." #}
    {% set month_map = {
      'janvier':1,'fÃ©vrier':2,'fevrier':2,'mars':3,'avril':4,'mai':5,'juin':6,'juillet':7,'aoÃ»t':8,'aout':8,'septembre':9,'octobre':10,'novembre':11,'dÃ©cembre':12,'decembre':12,
      'enero':1,'febrero':2,'marzo':3,'abril':4,'mayo':5,'junio':6,'julio':7,'agosto':8,'septiembre':9,'setiembre':9,'octubre':10,'noviembre':11,'diciembre':12,
      'january':1,'february':2,'march':3,'april':4,'may':5,'june':6,'july':7,'august':8,'september':9,'october':10,'november':11,'december':12
    } %}

    {% macro ts_from(date_str) -%}
      {%- set s = (date_str or '') -%}
      {%- set parts = s.split() -%}
      {%- if parts|length >= 3 -%}
        {%- set day = parts[0]|int -%}
        {%- set month = month_map.get(parts[1]|lower, 1) -%}
        {%- set year = parts[2]|int -%}
        {{ (year * 10000 + month * 100 + day) }}
      {%- else -%}
        0
      {%- endif -%}
    {%- endmacro %}

    {# Index des fallback pour remplacer message DB si mÃªme personne #}
    {% set fb_full = namespace(map={}) %}
    {% set fb_pair = namespace(map={}) %}
    {% for c in fallback_comments %}
      {% set kf = c.name ~ '|' ~ c.country ~ '|' ~ c.date %}
      {% set kp = c.name ~ '|' ~ c.country %}
      {% set _ = fb_full.map.update({kf: c}) %}
      {% set _ = fb_pair.map.update({kp: c}) %}
    {% endfor %}

    {# Enregistrer ce que la DB contient pour Ã©viter doublons #}
    {% set db_full = namespace(seen={}) %}
    {% set db_pair = namespace(seen={}) %}
    {% for c in comments or [] %}
      {% set kf = c.name ~ '|' ~ (c.country or '') ~ '|' ~ (c.date_str or '') %}
      {% set kp = c.name ~ '|' ~ (c.country or '') %}
      {% set _ = db_full.seen.update({kf: 1}) %}
      {% set _ = db_pair.seen.update({kp: 1}) %}
    {% endfor %}

    {# Fusion DB + fallback (remplacement du message si dispo), puis tri par date desc #}
    {% set merged = [] %}

    {# 1) DB d'abord (avec message remplacÃ© si on a une version langue d'origine) #}
    {% for c in comments or [] %}
      {% set kf = c.name ~ '|' ~ (c.country or '') ~ '|' ~ (c.date_str or '') %}
      {% set kp = c.name ~ '|' ~ (c.country or '') %}
      {% set fb = fb_full.map.get(kf) or fb_pair.map.get(kp) %}
      {% set msg = (fb.message if fb else c.message) %}
      {% set merged = merged + [{
        'name': c.name,
        'country': c.country,
        'date': c.date_str,
        'rating': c.rating,
        'message': msg,
        'ts': (ts_from(c.date_str)|int)
      }] %}
    {% endfor %}

    {# 2) Ajouter les fallback manquants (pas prÃ©sents en DB) #}
    {% for fb in fallback_comments %}
      {% set kf = fb.name ~ '|' ~ fb.country ~ '|' ~ fb.date %}
      {% set kp = fb.name ~ '|' ~ fb.country %}
      {% if not (kf in db_full.seen or kp in db_pair.seen) %}
        {% set merged = merged + [{
          'name': fb.name,
          'country': fb.country,
          'date': fb.date,
          'rating': fb.rating,
          'message': fb.message,
          'ts': (ts_from(fb.date)|int)
        }] %}
      {% endif %}
    {% endfor %}

    {% set merged = merged|sort(attribute='ts', reverse=true) %}

    <div class="testimonials-grid">
      {% for c in merged %}
        <div class="testimonial-card">
          <div class="t-head">
            <div class="t-name">{{ c.name }}{% if c.country %} Â· {{ c.country }}{% endif %}</div>
            <div class="t-meta">{{ c.date }}</div>
          </div>

          <div class="t-stars" aria-label="{{ c.rating }} / 5">
            {% for i in range(1, 6) %}
              {% if c.rating >= i %}
                <svg><use href="#icon-star-full"></use></svg>
              {% elif c.rating >= i - 0.5 %}
                <svg><use href="#icon-star-half"></use></svg>
              {% else %}
                <svg><use href="#icon-star-empty"></use></svg>
              {% endif %}
            {% endfor %}
            <span class="sr-only">{{ c.rating }} / 5</span>
          </div>

          {% set is_long = (c.message|length > 200) %}
          <p class="t-text{{ ' clamp' if is_long else '' }}"
             id="comment-{{ loop.index }}"
             data-full="{{ c.message|e }}">
            {{ (c.message[:200] ~ '...') if is_long else c.message }}
          </p>
          <button class="t-toggle"
                  onclick="toggleText('{{ loop.index }}')"
                  style="{{ '' if is_long else 'display:none;' }}">
            {{ _("Lire plus") }}
          </button>
        </div>
      {% endfor %}
    </div>
  </div>
</section>


  <!-- âœ… Sticky bar mobile uniquement -->
  <div class="sticky-cta">
    <div class="container row">
      <a class="btn btn-outline"
         href="https://wa.me/573505384537?text={{ _('Bonjour Alejandra ! Je suis intÃ©ressÃ© par une visite ðŸ¤—') | urlencode }}"
         target="_blank" rel="noopener">WhatsApp</a>
      <a class="btn" href="{{ url_for('reservation', lang=get_locale()) }}">{{ _("RÃ©server") }}</a>
    </div>
  </div>

  <!-- âœ… Script burger minimal -->
  <script>
    (function(){
      var burger = document.getElementById('burger');
      var nav = document.getElementById('nav-menu');
      if (!burger || !nav) return;
      burger.addEventListener('click', function(){
        var expanded = burger.getAttribute('aria-expanded') === 'true';
        burger.setAttribute('aria-expanded', String(!expanded));
        nav.classList.toggle('open');
        document.body.classList.toggle('no-scroll', !expanded);
      });
      nav.addEventListener('click', function(e){
        var a = e.target.closest('a');
        if (!a) return;
        burger.setAttribute('aria-expanded', 'false');
        nav.classList.remove('open');
        document.body.classList.remove('no-scroll');
      });
    })();
  </script>

</body>
</html>

