<!DOCTYPE html>
<html lang="{{ get_locale() }}">
<head>
  <meta charset="UTF-8" />
  <title>{{ _("RÃ©server votre visite") }} â€” Oh La La Tours BogotÃ¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- âœ… Meta SEO -->
  <meta name="description" content="{{ _('RÃ©servez votre visite guidÃ©e Ã  BogotÃ¡ : Candelaria, Monserrate, ZipaquirÃ¡, La Chorrera et finca cafÃ©. Guide francophone/anglais/espagnol.') }}">
  <meta name="keywords" content="rÃ©servation tour BogotÃ¡, rÃ©server visite guidÃ©e BogotÃ¡, tours privÃ©s BogotÃ¡, Candelaria, Monserrate, ZipaquirÃ¡, La Chorrera, Hacienda Coloma, guide francophone BogotÃ¡">

  <!-- âœ… CMP / consentmanager (doit Ãªtre avant GA) -->
  <script type="text/javascript" data-cmp-ab="0"
          src="https://cdn.consentmanager.net/delivery/autoblocking/62cc8437f29ac.js"
          data-cmp-host="b.delivery.consentmanager.net"
          data-cmp-cdn="cdn.consentmanager.net"
          data-cmp-codesrc="16"></script>

  <!-- âœ… Google Consent Mode -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('consent', 'default', {
      ad_storage: 'denied',
      analytics_storage: 'denied',
      ad_user_data: 'denied',
      ad_personalization: 'denied',
      wait_for_update: 500
    });
  </script>

  <!-- âœ… Google tag -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-92M6CENDXH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-92M6CENDXH', { anonymize_ip: true });
  </script>

  <!-- âœ… Texte masquÃ© accessible -->
  <style>
    .sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,1px,1px);white-space:nowrap;border:0}
  </style>

  <!-- âœ… Styles AJOUTÃ‰S pour le header fixe + logo -->
  <style>
    .site-header{
      position:fixed; top:0; left:0; right:0; z-index:70;
      display:flex; align-items:center; justify-content:space-between;
      padding:10px 16px; gap:16px;
      background:transparent; transition:background .25s ease, box-shadow .25s ease;
    }
    .brand{display:inline-flex; align-items:center; gap:10px}
    .logo{height:44px; width:auto; display:block}
    @media (max-width:640px){ .logo{height:32px} }

    .main-nav{display:flex; align-items:center; gap:18px; font-weight:600}
    .main-nav a{text-decoration:none}
    .lang-switcher{display:flex; gap:8px; margin-left:8px}
    .lang-switcher a{font-size:20px; line-height:1; padding:4px 6px; border-radius:6px}

    /* Sur cette page (hero en fond) : liens & logo blancs au dÃ©part */
    .header-on-hero .main-nav a{color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.35)}
    .logo--dark{display:none}

    /* âœ… Titre ajoutÃ© */
    .site-title{
      font-size:1.35rem;
      font-weight:600;
      margin-left:8px;
      line-height:1.2;
    }
    .header-on-hero .site-title{ color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.35); }
    .site-header.scrolled .site-title{ color:#0f172a; text-shadow:none; }

    /* Au scroll / fond clair */
    .site-header.scrolled{
      background: rgba(255,255,255,.86);
      backdrop-filter: saturate(180%) blur(8px);
      box-shadow: 0 2px 10px rgba(0,0,0,.08);
    }
    .site-header.scrolled .logo--light{display:none}
    .site-header.scrolled .logo--dark{display:block}
    .site-header.scrolled .main-nav a{color:#0f172a}
  </style>

  <!-- âœ… Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='img/favicon/apple-touch-icon.png') }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/favicon/favicon-32x32.png') }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='img/favicon/favicon-16x16.png') }}">
  <link rel="manifest" href="{{ url_for('static', filename='img/favicon/site.webmanifest') }}">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='img/favicon/favicon.ico') }}">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <meta name="theme-color" content="#0b4654">
  <meta name="google-site-verification" content="4z28-XXEkdcB_VOcaGoy1bhgA-zj7xr6wSf76ZwZ4tQ" />

  <!-- âœ… Canonical + hreflang -->
  <link rel="canonical" href="https://www.ohlalatoursbogota.com{{ request.path }}{% if get_locale()!='fr' %}?lang={{ get_locale() }}{% endif %}">
  <link rel="alternate" href="{{ url_for('reservation', lang='fr', _external=True) }}" hreflang="fr">
  <link rel="alternate" href="{{ url_for('reservation', lang='en', _external=True) }}" hreflang="en">
  <link rel="alternate" href="{{ url_for('reservation', lang='es', _external=True) }}" hreflang="es">
  <link rel="alternate" href="{{ url_for('reservation', lang='fr', _external=True) }}" hreflang="x-default">

  <!-- âœ… Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.ohlalatoursbogota.com{{ request.path }}{% if get_locale()!='fr' %}?lang={{ get_locale() }}{% endif %}">
  <meta property="og:site_name" content="Oh La La Tours BogotÃ¡">
  <meta property="og:title" content="{{ _('RÃ©server votre visite â€“ Oh La La Tours BogotÃ¡') }}">
  <meta property="og:description" content="{{ _('RÃ©servez une visite guidÃ©e : Candelaria, Monserrate, ZipaquirÃ¡, La Chorrera ou finca cafÃ©. Paiement PayPal, guide francophone/anglais/espagnol.') }}">
  <meta property="og:image" content="{{ url_for('static', filename='images/bg_reservation.jpg', _external=True) }}">
  <meta property="og:image:alt" content="{{ _('Panorama de BogotÃ¡, tÃ©lÃ©phÃ©rique de Monserrate et rues coloniales de la Candelaria...') }}">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ _('RÃ©server votre visite â€“ Oh La La Tours BogotÃ¡') }}">
  <meta name="twitter:description" content="{{ _('RÃ©servez une visite guidÃ©e...') }}">
  <meta name="twitter:image" content="{{ url_for('static', filename='images/bg_reservation.jpg', _external=True) }}">
  <meta name="twitter:image:alt" content="{{ _('Panorama de BogotÃ¡, tÃ©lÃ©phÃ©rique de Monserrate et rues coloniales de la Candelaria...') }}">

  <!-- âœ… CSS global -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <!-- ðŸ“± intl-tel-input (drapeaux + indicatifs) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/css/intlTelInput.css" />
</head>
<body>

<header class="site-header header-on-hero">
  <div class="logo-container">
    <!-- Logo clair -->
    <img src="{{ url_for('static', filename='img/logo-light.png') }}" alt="Oh La La Tours BogotÃ¡" class="logo logo--light">
    <!-- Logo foncÃ© -->
    <img src="{{ url_for('static', filename='img/logo-dark.png') }}" alt="Oh La La Tours BogotÃ¡" class="logo logo--dark">
    <!-- âœ… Titre ajoutÃ© -->
    <span class="site-title">Oh La La Tours BogotÃ¡</span>
  </div>

  <nav class="main-nav" aria-label="{{ _('Navigation principale') }}">
    <a href="{{ url_for('index', lang=get_locale()) }}">{{ _("Accueil") }}</a>
    <a href="{{ url_for('tours', lang=get_locale()) }}">{{ _("Nos tours") }}</a>
    <a href="{{ url_for('transport', lang=get_locale()) }}">{{ _("Service de Transport") }}</a>
    <a href="{{ url_for('reservation', lang=get_locale()) }}">{{ _("RÃ©servation") }}</a>
    <div class="lang-switcher" aria-label="{{ _('Changer de langue') }}">
      <a href="{{ lang_url('fr') }}" lang="fr" aria-label="FranÃ§ais">ðŸ‡«ðŸ‡·<span class="sr-only">FranÃ§ais</span></a>
      <a href="{{ lang_url('en') }}" lang="en" aria-label="English">ðŸ‡ºðŸ‡¸<span class="sr-only">English</span></a>
      <a href="{{ lang_url('es') }}" lang="es" aria-label="EspaÃ±ol">ðŸ‡ªðŸ‡¸<span class="sr-only">EspaÃ±ol</span></a>
    </div>
  </nav>
</header>

<!-- Bandeau -->
<header class="hero background-half"
        style="background-image: url('{{ url_for('static', filename='images/bg_reservation.jpg') }}');">
  <h1 class="hero-title">
    {{ _("RÃ©server votre visite") }}{% if tour %} : {{ _(tour.capitalize()) }}{% endif %}
  </h1>
</header>

<!-- Fil dâ€™Ariane -->
<nav aria-label="{{ _('Fil dâ€™Ariane') }}" style="max-width:1000px;margin:10px auto;padding:0 20px;font-size:.95rem;">
  <a href="{{ url_for('index', lang=get_locale()) }}">{{ _('Accueil') }}</a> â€º
  <a href="{{ url_for('tours', lang=get_locale()) }}">{{ _('Nos tours') }}</a> â€º
  <span aria-current="page">{{ _('RÃ©servation') }}</span>
</nav>

<!-- Formulaire -->
<main>

  <!-- ðŸ”” Messages flash visibles en haut de la page -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-messages" style="max-width:1000px;margin:16px auto;padding:12px 14px;border-radius:10px;background:#e6ffed;color:#065f46;border:1px solid #a7f3d0;">
        {% for category, message in messages %}
          <p style="margin:0">{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <section class="reservation-container">
    <form class="reservation-form" method="POST" action="{{ url_for('reservation', lang=get_locale()) }}" novalidate>

      <!-- âœ… Toujours envoyer la langue de lâ€™UI -->
      <input type="hidden" name="ui_lang" value="{{ get_locale() }}">

      <label for="nom">{{ _("Nom") }}</label>
      <input type="text" id="nom" name="nom" required autocomplete="name" inputmode="text">

      <label for="email">{{ _("Email") }}</label>
      <input type="email" id="email" name="email" required autocomplete="email" inputmode="email">

      <!-- ðŸ“ž TÃ©lÃ©phone avec indicatif pays -->
      <label for="phone_input">{{ _("TÃ©lÃ©phone (WhatsApp de prÃ©fÃ©rence)") }}</label>
      <input type="tel" id="phone_input" inputmode="tel" autocomplete="tel" placeholder="{{ _('Ex. +33 6 12 34 56 78') }}" />
      <input type="hidden" name="phone" id="phone_full">

      <label for="country">{{ _("Pays") }}</label>
      <input type="text" id="country" name="country" placeholder="{{ _('France, Canada, Colombie...') }}" autocomplete="country-name" required>

      <label for="date">{{ _("Date souhaitÃ©e") }}</label>
      <input type="date" id="date" name="date" required>

      <!-- ðŸ‘¥ Nombre de personnes -->
      <label for="persons">{{ _("Nombre de personnes") }} <small aria-hidden="true">({{ _("max") }} 6)</small></label>
      <input type="number" id="persons" name="persons" min="1" max="6" value="1" required aria-describedby="persons-hint">
      <div id="persons-hint" class="sr-only">{{ _("Maximum 6 personnes") }}</div>

      <label for="message">{{ _("Message") }}</label>
      <textarea id="message" name="message" rows="4" placeholder="{{ _('Infos utiles, horaires, etc.') }}"></textarea>

      <label for="tour">{{ _("Choisissez un tour") }}</label>
      <select name="tour" id="tour" required>
        <option value="">{{ _("-- SÃ©lectionnez --") }}</option>
        <option value="candelaria" {{ 'selected' if tour=='candelaria' else '' }}>{{ _("Visite historique de La Candelaria") }}</option>
        <option value="monserrate" {{ 'selected' if tour=='monserrate' else '' }}>{{ _("DÃ©couverte du Monserrate") }}</option>
        <option value="zipaquira"  {{ 'selected' if tour=='zipaquira'  else '' }}>{{ _("Excursion Ã  la CathÃ©drale de sel de ZipaquirÃ¡") }}</option>
        <option value="chorrera"   {{ 'selected' if tour=='chorrera'   else '' }}>{{ _("Cascade de La Chorrera") }}</option>
        <option value="finca-cafe" {{ 'selected' if tour=='finca-cafe' else '' }}>{{ _("Visite dâ€™une finca Ã  cafÃ©") }}</option>
      </select>

      <button type="submit" id="form-submit">{{ _("Envoyer") }}</button>
    </form>
  </section>
</main>

<!-- DonnÃ©es structurÃ©es -->
<script type="application/ld+json">{"@context":"https://schema.org","@type":"Service","name":"RÃ©servation de visites guidÃ©es Ã  BogotÃ¡"}</script>

<!-- âœ… Script toggle du header -->
<script>
  (function(){
    const header = document.querySelector('.site-header');
    if(!header) return;
    function onScroll(){ header.classList.toggle('scrolled', window.scrollY > 60); }
    onScroll();
    window.addEventListener('scroll', onScroll, {passive:true});
  })();
</script>

<!-- ðŸ“± intl-tel-input JS -->
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/js/intlTelInput.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/js/utils.js"></script>
<script>
  (function(){
    const input = document.getElementById('phone_input');
    if(!input) return;
    // Choix du pays par dÃ©faut selon la langue du site
    const lang = "{{ get_locale() }}";
    let initial = 'fr';
    if (lang === 'en') initial = 'us';
    if (lang === 'es') initial = 'co'; // Colombie sur ES

    const iti = window.intlTelInput(input, {
      initialCountry: initial,
      separateDialCode: true,
      utilsScript: 'https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/js/utils.js'
    });

    // Ã€ lâ€™envoi: on stocke le numÃ©ro complet au format E.164 dans lâ€™input cachÃ© "phone"
    const form = document.querySelector('.reservation-form');
    form.addEventListener('submit', function(){
      const hidden = document.getElementById('phone_full');
      const e164 = iti.getNumber(); // ex: +33612345678
      hidden.value = e164 || input.value.trim();
    });
  })();
</script>

</body>
</html>



